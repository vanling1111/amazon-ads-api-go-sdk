openapi: 3.0.1
info:
  title: Amazon Ads API for Data Providers.
  description: "Use to create, read, or update audience metadata and to add or remove\
    \ audience records. For onboarding information, see [_setting up for the Amazon\
    \ Ads API_](../guides/onboarding/overview)."
  contact:
    name: Amazon Ads API Support
    url: https://amzn-clicks.atlassian.net/servicedesk/customer/portals
  license:
    name: Amazon Ads Data Provider Agreement
    url: https://advertising.amazon.com/dsp/agreement/dataProviderApi/en
  version: "3.0"
servers:
- url: /
tags:
- name: Metadata
- name: Add or remove records
- name: User deletion
paths:
  /v2/dp/audiencemetadata/:
    post:
      tags:
      - Metadata
      summary: Creates a new data provider audience. Note that the API call rate is
        limited to 1 transaction per second (TPS). Calls exceeding this rate are throttled.
      parameters:
      - name: Authorization
        in: header
        description: A valid access token.
        required: true
        style: simple
        explode: false
        schema:
          type: string
        example: Bearer Atza|IQEBLjAsAhRmHjNgHpi0UDme37rR6CuUpSR
      - name: Amazon-Advertising-API-ClientId
        in: header
        description: The identifier of a client associated with a "Login with Amazon"
          account.
        required: true
        style: simple
        explode: false
        schema:
          type: string
      - name: Content-Type
        in: header
        description: The `Content-Type` is application/json.
        required: true
        style: simple
        explode: false
        schema:
          type: string
        example: application/json
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/dp_audiencemetadata_body'
        required: true
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_200'
        "400":
          description: Bad Request.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_400'
        "403":
          description: The client is not allowed to update the audience.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_400'
        "404":
          description: The specified identifier was not found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_400'
        "429":
          description: The client exceeded the allowed number of requests..
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_400'
        "500":
          description: Internal error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_400'
        "503":
          description: The service is unavailable.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_400'
  /v2/dp/audiencemetadata/{audienceId}:
    get:
      tags:
      - Metadata
      summary: Gets metadata for an audience specified by identifier. Note that the
        API call rate is limited to 1 transaction per second (TPS). Calls exceeding
        this rate are throttled.
      parameters:
      - name: Authorization
        in: header
        description: A valid access token.
        required: true
        style: simple
        explode: false
        schema:
          type: string
        example: Bearer Atza|IQEBLjAsAhRmHjNgHpi0UDme37rR6CuUpSR
      - name: Amazon-Advertising-API-ClientId
        in: header
        description: The identifier of a client associated with a "Login with Amazon"
          account.
        required: true
        style: simple
        explode: false
        schema:
          type: string
      - name: Content-Type
        in: header
        description: The `Content-Type` is application/json.
        required: true
        style: simple
        explode: false
        schema:
          type: string
        example: application/json
      - name: audienceId
        in: path
        description: The audience identifier.
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_200_1'
        "403":
          description: The client is not allowed to update the audience.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_400'
        "404":
          description: The specified identifier was not found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_400'
        "429":
          description: The client exceeded the allowed number of requests..
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_400'
        "500":
          description: Internal error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_400'
        "503":
          description: The service is unavailable.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_400'
    put:
      tags:
      - Metadata
      summary: Updates metadata of an existing audience specified by identifier. Note
        that the API call rate is limited to 1 transaction per second (TPS). Calls
        exceeding this rate are throttled.
      parameters:
      - name: Authorization
        in: header
        description: A valid access token.
        required: true
        style: simple
        explode: false
        schema:
          type: string
        example: Bearer Atza|IQEBLjAsAhRmHjNgHpi0UDme37rR6CuUpSR
      - name: Amazon-Advertising-API-ClientId
        in: header
        description: The identifier of a client associated with a "Login with Amazon"
          account.
        required: true
        style: simple
        explode: false
        schema:
          type: string
      - name: Content-Type
        in: header
        description: The `Content-Type` is application/json.
        required: true
        style: simple
        explode: false
        schema:
          type: string
        example: application/json
      - name: audienceId
        in: path
        description: The audience identifier.
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/audiencemetadata_audienceId_body'
        required: true
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_200'
        "400":
          description: Bad Request.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_400'
        "403":
          description: The client is not allowed to update the audience.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_400'
        "404":
          description: The specified identifier was not found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_400'
        "429":
          description: The client exceeded the allowed number of requests..
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_400'
        "500":
          description: Internal error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_400'
        "503":
          description: The service is unavailable.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_400'
  /v2/dp/audience:
    patch:
      tags:
      - Add or remove records
      summary: Associates or disassociates a record with an audience. Note that the
        API call rate is limited to 100 transactions per second (TPS). Calls exceeding
        this rate are throttled. Payload size is limited to a maximum of 6MB or 2000
        records. Calls with a payload exceeding limit receive a 413 response.
      parameters:
      - name: Authorization
        in: header
        description: A valid access token.
        required: true
        style: simple
        explode: false
        schema:
          type: string
        example: Bearer Atza|IQEBLjAsAhRmHjNgHpi0UDme37rR6CuUpSR
      - name: Amazon-Advertising-API-ClientId
        in: header
        description: The identifier of a client associated with a "Login with Amazon"
          account.
        required: true
        style: simple
        explode: false
        schema:
          type: string
      - name: Content-Type
        in: header
        description: The `Content-Type` is application/json.
        required: true
        style: simple
        explode: false
        schema:
          type: string
        example: application/json
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/dp_audience_body'
        required: true
      responses:
        "200":
          description: The request to add or remove an audience was submitted. Note
            that requests can take up to two hours to be processed.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_200_2'
        "400":
          description: Bad Request.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_400'
        "413":
          description: Input Too Large.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_413'
        "429":
          description: The client exceeded the allowed number of requests..
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_400'
        "500":
          description: Internal error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_400'
        "503":
          description: The service is unavailable.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_400'
  /v2/dp/users:
    patch:
      tags:
      - User deletion
      summary: Deletes user data originally sourced from the client. The API call
        rate is limited to 1 transactions per second (TPS). Calls exceeding this rate
        are throttled. Payload size is limited to 1000 users or 1MB. Calls with a
        more than 1000 users or 1MB will receive a 413 response.
      description: Deletes user data sourced from data providers. Deletes users scoped
        either to an advertiser or for the data provider. The SLA for data deletion
        is 30 days.
      parameters:
      - name: Authorization
        in: header
        description: 'A valid access token. '
        required: true
        style: simple
        explode: false
        schema:
          type: string
        example: Bearer Atza|IQEBLjAsAhRmHjNgHpi0UDme37rR6CuUpSR
      - name: Amazon-Advertising-API-ClientID
        in: header
        description: The client identifier.
        required: true
        style: simple
        explode: false
        schema:
          type: string
        example: amzn1.application-oa2-client.8baa9caa3eac48eab89780e73ce03b19
      - name: Content-Type
        in: header
        description: The Content-Type is `application/json`.
        required: true
        style: simple
        explode: false
        schema:
          type: string
        example: application/json
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/dp_users_body'
            example:
              users:
              - userId:
                  type: COOKIE
                  value: EMpBAI0GRcK4nBNGpPGg5g
                advertiserId: 205759403805
                consentTime: 1581557890000
              - userId:
                  type: COOKIE
                  value: EMpBAI0GRcK4nBNGpPGg5g
                advertiserId: 305759403805
                consentTime: 1581557900000
              operation: DELETE
        required: true
      responses:
        "202":
          description: The request to delete user data was submitted.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_202'
        "400":
          description: Bad Request.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_400_1'
        "413":
          description: Input Too Large.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_413'
        "429":
          description: Too Many Requests.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_429'
        "500":
          description: Internal Server Error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_500'
        "503":
          description: Server Unavailable.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/inline_response_503'
components:
  schemas:
    audienceName:
      type: string
      description: The audience name. Must be an alphanumeric string between 10 to
        128 characters in length.
    audienceDescription:
      type: string
      description: "The audience description. Must be an alphanumeric, non-null string\
        \ between 0 to 1000 characters in length."
    audienceId:
      type: integer
      description: The
      format: int64
    advertiserId:
      type: integer
      description: The advertiser identifier.
      format: int64
    metadataType:
      type: string
      description: The audience metadata type. Only 'DATA_PROVIDER' is currently supported.
      enum:
      - DATA_PROVIDER
    externalAudienceId:
      type: string
      description: The user-defined audience identifier.
    recordTtl:
      maximum: 34300800
      minimum: 0
      type: integer
      description: "Time-to-live (ttl), in seconds. The amount of time the record\
        \ is associated with the audience."
    audienceFees:
      type: array
      items:
        $ref: '#/components/schemas/audienceFees_inner'
      x-schema-name: audienceFees
    dataSourceCountry:
      type: array
      description: A list of country codes describing where data in an audience is
        collected from. Country code is defined in https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2.
      example:
      - US
      - CA
      items:
        type: string
        description: Country code is defined in https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2.
        example: GB
      x-schema-name: dataSourceCountry
    requestId:
      type: string
      description: The request identifier.
      example: a1b1234c-d11d-4e5f-82gh-c609c22255bd
    httpStatusCode:
      type: string
      description: The HTTP status code.
      example: "400"
    errorDescription:
      type: string
      description: A human-readable description of the error.
      example: Bad Request
    subError:
      type: array
      items:
        $ref: '#/components/schemas/subError_inner'
      x-schema-name: subError
    tcf:
      type: string
      description: TCF(Transparency & Consent Framework) consent string that wraps
        privacy consent information from user.
      example: CQB4ySFQB4ySFBlAAAENCZCAAAAAAAAAAAAAAAAAAAAA.II7Nd_X__bX9n-_7_6ft0eY1f9_r37uQzDhfNs-8F3L_W_LwX32E7NF36tq4KmR4ku1bBIQNtHMnUDUmxaolVrzHsak2cpyNKJ_JkknsZe2dYGF9Pn9lD-YKZ7_5_9_f52T_9_9_-39z3_9f___dv_-__-vjf_599n_v9fV_78_Kf9______-____________8A
    gpp:
      type: string
      description: GPP(Global Privacy Platform) consent string that wraps privacy
        consent information from user.
      example: DBADMZg~CQB2TAAQB2TAAPoABABGA9EAAAAAAAAAAAAAAAAAAAAA.QAAA.IAAA~BQB2TAAQB2TAAPoABABGBZCAAAAAAAgAAAAAAAAAAA.YAAAAAAAAAA~BAAAAAAAAQA.QA
    amazonConsent:
      required:
      - amazonAdStorage
      - amazonUserData
      type: object
      properties:
        amazonAdStorage:
          type: string
          description: Set consent for advertising related storage such as cookies(web)
            or device identifiers(apps).
          enum:
          - GRANTED
          - DENIED
        amazonUserData:
          type: string
          description: Set consent to use personal data for online advertising purposes.
          enum:
          - GRANTED
          - DENIED
      example:
        amazonAdStorage: GRANTED
        amazonUserData: GRANTED
    v2dpaudiencemetadata_metadata:
      required:
      - dataSourceCountry
      - externalAudienceId
      - type
      type: object
      properties:
        type:
          $ref: '#/components/schemas/metadataType'
        externalAudienceId:
          $ref: '#/components/schemas/externalAudienceId'
        ttl:
          $ref: '#/components/schemas/recordTtl'
        audienceFees:
          $ref: '#/components/schemas/audienceFees'
        dataSourceCountry:
          $ref: '#/components/schemas/dataSourceCountry'
    dp_audiencemetadata_body:
      required:
      - advertiserId
      - description
      - metadata
      - name
      type: object
      properties:
        name:
          $ref: '#/components/schemas/audienceName'
        description:
          $ref: '#/components/schemas/audienceDescription'
        advertiserId:
          $ref: '#/components/schemas/advertiserId'
        metadata:
          $ref: '#/components/schemas/v2dpaudiencemetadata_metadata'
    inline_response_200:
      type: object
      properties:
        requestId:
          $ref: '#/components/schemas/requestId'
        audience:
          $ref: '#/components/schemas/inline_response_200_audience'
      example:
        audience:
          metadata:
            externalAudienceId: externalAudienceId
            audienceFees:
            - cpmCents: 5
              currency: USD
            - cpmCents: 5
              currency: USD
            type: DATA_PROVIDER
            ttl: 5027855
            dataSourceCountry:
            - US
            - CA
          name: name
          description: description
          id: 0
          advertiserId: 6
        requestId: a1b1234c-d11d-4e5f-82gh-c609c22255bd
    inline_response_400:
      type: object
      properties:
        requestId:
          $ref: '#/components/schemas/requestId'
        error:
          $ref: '#/components/schemas/inline_response_400_error'
    inline_response_200_1:
      type: object
      properties:
        requestId:
          $ref: '#/components/schemas/requestId'
        audience:
          $ref: '#/components/schemas/inline_response_200_1_audience'
      example:
        audience:
          metadata:
            externalAudienceId: externalAudienceId
            audienceSize:
              matchedRecordSize: 5
              matchRate: 0.23021358
              receivedRecordSize: 5
            audienceFees:
            - cpmCents: 5
              currency: USD
            - cpmCents: 5
              currency: USD
            type: DATA_PROVIDER
            ttl: 5027855
            dataSourceCountry:
            - US
            - CA
          name: name
          description: description
          id: 0
          advertiserId: 6
        requestId: a1b1234c-d11d-4e5f-82gh-c609c22255bd
    v2dpaudiencemetadataaudienceId_metadata:
      type: object
      properties:
        ttl:
          $ref: '#/components/schemas/recordTtl'
        audienceFees:
          $ref: '#/components/schemas/audienceFees'
        dataSourceCountry:
          $ref: '#/components/schemas/dataSourceCountry'
    audiencemetadata_audienceId_body:
      type: object
      properties:
        description:
          $ref: '#/components/schemas/audienceDescription'
        metadata:
          $ref: '#/components/schemas/v2dpaudiencemetadataaudienceId_metadata'
      description: A data provider audience object with updated values.
    v2dpaudience_consent:
      type: object
      properties:
        consentType:
          type: string
          description: The type of consent provided.
          enum:
          - TCF
          - GPP
          - Amazon
        tcf:
          $ref: '#/components/schemas/tcf'
        gpp:
          $ref: '#/components/schemas/gpp'
        amazonConsent:
          $ref: '#/components/schemas/amazonConsent'
      description: "An object that contains user consent. Only one type of consent(TCF,\
        \ GPP, amazonConsent) should be provided."
      discriminator:
        propertyName: consentType
        mapping:
          TCF: '#/components/schemas/tcf'
          GPP: '#/components/schemas/gpp'
          Amazon: '#/components/schemas/amazonConsent'
    v2dpaudience_patches:
      type: object
      properties:
        op:
          type: string
          description: Specifies the type of operation. Valid operations are `add`
            or `remove`.
          enum:
          - add
          - remove
        path:
          type: string
          description: "A formatted string that specifies the URL of the record. The\
            \ format of the string is `/<recordIdType>-<recordIdValue>/audiences`,\
            \ where 'recordIdType' specifies the record's origin and 'recordIdValue'\
            \ specifies the record's Id. Valid 'recordIdType' values are `COOKIE`,\
            \ a cookie Id sent from a data provider to Amazon by a cookie sync; `MAID`,\
            \ a mobile advertising identifier; `EXTERNAL_USER_ID`, an external id\
            \ defined by data providers."
          format: /<recordIdType>-<recordIdValue>/audiences
          example: /COOKIE-EMpBAI0GRcK4nBNGpPGg5g/audiences
        value:
          type: array
          items:
            type: integer
            description: An integer value representing the Amazon audience identifer.
              This is the identifier that is returned during audience creation.
            format: int64
            example: 72057594038053890
        consent:
          $ref: '#/components/schemas/v2dpaudience_consent'
    dp_audience_body:
      type: object
      properties:
        patches:
          type: array
          items:
            $ref: '#/components/schemas/v2dpaudience_patches'
    inline_response_200_2:
      type: object
      properties:
        jobId:
          type: string
          description: A unique identifier representing the workflow of the submitted
            request.
          example: f076ddd9-3f84-44e8-b5cf-742b08f2bc9f
        requestId:
          type: string
          description: A unique identifier representing the request.
          example: F88750355N-B70JY53CSD
      example:
        jobId: f076ddd9-3f84-44e8-b5cf-742b08f2bc9f
        requestId: F88750355N-B70JY53CSD
    inline_response_413:
      type: object
      properties:
        requestId:
          type: string
          description: Identifier associated with the request.
          example: F88750355N-B70JY53CSD
        error:
          $ref: '#/components/schemas/inline_response_413_error'
    v2dpusers_userId:
      type: object
      properties:
        type:
          type: string
          description: Specifies the type of the user identifier.
          enum:
          - COOKIE
          - MAID
          - EXTERNAL_USER_ID
        value:
          type: string
          description: The user identifer.
    v2dpusers_users:
      type: object
      properties:
        userId:
          $ref: '#/components/schemas/v2dpusers_userId'
        advertiserId:
          type: string
          description: "The advertiser identifier. If present, the user data for the\
            \ specified advertiser is deleted. Otherwise, all data about this user\
            \ sourced from this client is deleted."
          example: "205759403805"
        consentTime:
          type: integer
          description: User consent time in epoch milliseconds
          format: int64
          example: 1581557890000
    dp_users_body:
      type: object
      properties:
        users:
          type: array
          items:
            $ref: '#/components/schemas/v2dpusers_users'
        operation:
          type: string
          enum:
          - DELETE
    inline_response_202:
      type: object
      properties:
        requestId:
          type: string
          description: A unique identifier representing the request.
          example: F88750355N-B70JY53CSD
      example:
        requestId: F88750355N-B70JY53CSD
    inline_response_400_1:
      type: object
      properties:
        requestId:
          type: string
          description: Identifier associated with the request.
          example: F88750355N-B70JY53CSD
        error:
          $ref: '#/components/schemas/inline_response_400_1_error'
    inline_response_429:
      type: object
      properties:
        requestId:
          type: string
          description: Identifier associated with the request.
          example: F88750355N-B70JY53CSD
        error:
          $ref: '#/components/schemas/inline_response_429_error'
    inline_response_500:
      type: object
      properties:
        requestId:
          type: string
          description: Identifier associated with the request.
          example: F88750355N-B70JY53CSD
        error:
          $ref: '#/components/schemas/inline_response_500_error'
    inline_response_503:
      type: object
      properties:
        requestId:
          type: string
          description: Identifier associated with the request.
          example: F88750355N-B70JY53CSD
        error:
          $ref: '#/components/schemas/inline_response_503_error'
    audienceFees_inner:
      required:
      - cpmCents
      - currency
      type: object
      properties:
        cpmCents:
          type: integer
          description: "Cost per thousand impressions (CPM) in cents. For example,\
            \ $1.00 = 100 cents."
        currency:
          type: string
          description: Currency key as defined in https://en.wikipedia.org/wiki/ISO_4217.
            Note that the currency key is required to match the default currency associated
            with the Amazon DSP account.
          enum:
          - USD
          - CAD
          - JPY
          - GBP
          - EUR
          - AUD
          - AED
          - SAR
          - MXN
          - INR
          - SEK
          - TRY
          - BRL
      description: Object describing the audience fee.
      example:
        cpmCents: 5
        currency: USD
    subError_inner:
      type: object
      properties:
        errorType:
          type: string
          description: The type of error.
          example: INVALID_INPUT
        message:
          type: string
          description: A human-readable description of the error.
          example: The input field 'name' cannot be updated
        fieldName:
          type: string
          description: The field name.
          example: name
    inline_response_200_audience_metadata:
      type: object
      properties:
        type:
          $ref: '#/components/schemas/metadataType'
        externalAudienceId:
          $ref: '#/components/schemas/externalAudienceId'
        ttl:
          $ref: '#/components/schemas/recordTtl'
        audienceFees:
          $ref: '#/components/schemas/audienceFees'
        dataSourceCountry:
          $ref: '#/components/schemas/dataSourceCountry'
      example:
        externalAudienceId: externalAudienceId
        audienceFees:
        - cpmCents: 5
          currency: USD
        - cpmCents: 5
          currency: USD
        type: DATA_PROVIDER
        ttl: 5027855
        dataSourceCountry:
        - US
        - CA
    inline_response_200_audience:
      type: object
      properties:
        id:
          $ref: '#/components/schemas/audienceId'
        name:
          $ref: '#/components/schemas/audienceName'
        description:
          $ref: '#/components/schemas/audienceDescription'
        advertiserId:
          $ref: '#/components/schemas/advertiserId'
        metadata:
          $ref: '#/components/schemas/inline_response_200_audience_metadata'
      example:
        metadata:
          externalAudienceId: externalAudienceId
          audienceFees:
          - cpmCents: 5
            currency: USD
          - cpmCents: 5
            currency: USD
          type: DATA_PROVIDER
          ttl: 5027855
          dataSourceCountry:
          - US
          - CA
        name: name
        description: description
        id: 0
        advertiserId: 6
    inline_response_400_error:
      type: object
      properties:
        httpStatusCode:
          $ref: '#/components/schemas/httpStatusCode'
        description:
          $ref: '#/components/schemas/errorDescription'
        errors:
          $ref: '#/components/schemas/subError'
    inline_response_200_1_audience_metadata_audienceSize:
      type: object
      properties:
        receivedRecordSize:
          type: integer
          description: The number of received records.
        matchedRecordSize:
          type: integer
          description: The number of matched records.
        matchRate:
          maximum: 1
          minimum: 0
          type: number
          description: The match rate.
          format: float
      description: Information about the size of the audience.
      example:
        matchedRecordSize: 5
        matchRate: 0.23021358
        receivedRecordSize: 5
    inline_response_200_1_audience_metadata:
      type: object
      properties:
        type:
          $ref: '#/components/schemas/metadataType'
        externalAudienceId:
          $ref: '#/components/schemas/externalAudienceId'
        ttl:
          $ref: '#/components/schemas/recordTtl'
        audienceFees:
          $ref: '#/components/schemas/audienceFees'
        audienceSize:
          $ref: '#/components/schemas/inline_response_200_1_audience_metadata_audienceSize'
        dataSourceCountry:
          $ref: '#/components/schemas/dataSourceCountry'
      example:
        externalAudienceId: externalAudienceId
        audienceSize:
          matchedRecordSize: 5
          matchRate: 0.23021358
          receivedRecordSize: 5
        audienceFees:
        - cpmCents: 5
          currency: USD
        - cpmCents: 5
          currency: USD
        type: DATA_PROVIDER
        ttl: 5027855
        dataSourceCountry:
        - US
        - CA
    inline_response_200_1_audience:
      type: object
      properties:
        id:
          $ref: '#/components/schemas/audienceId'
        name:
          $ref: '#/components/schemas/audienceName'
        description:
          $ref: '#/components/schemas/audienceDescription'
        advertiserId:
          $ref: '#/components/schemas/advertiserId'
        metadata:
          $ref: '#/components/schemas/inline_response_200_1_audience_metadata'
      example:
        metadata:
          externalAudienceId: externalAudienceId
          audienceSize:
            matchedRecordSize: 5
            matchRate: 0.23021358
            receivedRecordSize: 5
          audienceFees:
          - cpmCents: 5
            currency: USD
          - cpmCents: 5
            currency: USD
          type: DATA_PROVIDER
          ttl: 5027855
          dataSourceCountry:
          - US
          - CA
        name: name
        description: description
        id: 0
        advertiserId: 6
    inline_response_413_error_errors:
      type: object
      properties:
        errorType:
          type: string
          description: Type of error.
          example: INPUT_TOO_LARGE
        message:
          type: string
          description: Error message
          example: The input payload exceeds 1MB limit.
    inline_response_413_error:
      type: object
      properties:
        httpStatusCode:
          type: string
          description: HTTP status code associated with the response.
          example: "413"
        description:
          type: string
          description: Description of the error.
          example: Input Too Large
        errors:
          type: array
          description: An array of property objects that include more information
            about the request.
          items:
            $ref: '#/components/schemas/inline_response_413_error_errors'
      description: Detailed error messages associated with the request.
    inline_response_400_1_error_errors:
      type: object
      properties:
        errorType:
          type: string
          description: Type of error.
          example: INVALID_INPUT
        message:
          type: string
          description: Error message
          example: The inputs that you provided are not valid.
    inline_response_400_1_error:
      type: object
      properties:
        httpStatusCode:
          type: string
          description: HTTP status code associated with the response.
          example: "400"
        description:
          type: string
          description: Description of the error.
          example: Bad Request
        errors:
          type: array
          description: An array of property objects that include more information
            about the request.
          items:
            $ref: '#/components/schemas/inline_response_400_1_error_errors'
      description: Detailed error messages associated with the request.
    inline_response_429_error_errors:
      type: object
      properties:
        errorType:
          type: string
          description: Type of error.
          example: TOO_MANY_REQUESTS
        message:
          type: string
          description: Error message
          example: The number of requests exceeded 100 TPS.
    inline_response_429_error:
      type: object
      properties:
        httpStatusCode:
          type: string
          description: HTTP status code associated with the response.
          example: "429"
        description:
          type: string
          description: Description of the error.
          example: Too Many Requests
        errors:
          type: array
          description: An array of property objects that include more information
            about the request.
          items:
            $ref: '#/components/schemas/inline_response_429_error_errors'
      description: Detailed error messages associated with the request.
    inline_response_500_error_errors:
      type: object
      properties:
        errorType:
          type: string
          description: Type of error.
          example: INTERNAL_ERROR
        message:
          type: string
          description: Error message
          example: Internal error.
    inline_response_500_error:
      type: object
      properties:
        httpStatusCode:
          type: string
          description: HTTP status code associated with the response.
          example: "500"
        description:
          type: string
          description: Description of the error.
          example: Internal Error
        errors:
          type: array
          description: An array of property objects that include more information
            about the request.
          items:
            $ref: '#/components/schemas/inline_response_500_error_errors'
      description: Detailed error messages associated with the request.
    inline_response_503_error_errors:
      type: object
      properties:
        errorType:
          type: string
          description: Type of error.
          example: SERVICE_UNAVAILABLE
        message:
          type: string
          description: Error message
          example: Service unavailable.
    inline_response_503_error:
      type: object
      properties:
        httpStatusCode:
          type: string
          description: HTTP status code associated with the response.
          example: "503"
        description:
          type: string
          description: Description of the error.
          example: Service unavailable
        errors:
          type: array
          description: An array of property objects that include more information
            about the request.
          items:
            $ref: '#/components/schemas/inline_response_503_error_errors'
      description: Detailed error messages associated with the request.
  responses:
    "400BadRequest":
      description: Bad Request.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/inline_response_400'
    "403NotAllowed":
      description: The client is not allowed to update the audience.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/inline_response_400'
    "404NotFound":
      description: The specified identifier was not found.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/inline_response_400'
    "429TooManyRequests":
      description: The client exceeded the allowed number of requests..
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/inline_response_400'
    "500InternalError":
      description: Internal error.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/inline_response_400'
    "503ServiceUnavailable":
      description: The service is unavailable.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/inline_response_400'
  parameters:
    audienceId:
      name: audienceId
      in: path
      description: The audience identifier.
      required: true
      style: simple
      explode: false
      schema:
        type: integer
        format: int64
    authorizationHeader:
      name: Authorization
      in: header
      description: A valid access token.
      required: true
      style: simple
      explode: false
      schema:
        type: string
      example: Bearer Atza|IQEBLjAsAhRmHjNgHpi0UDme37rR6CuUpSR
    clientHeader:
      name: Amazon-Advertising-API-ClientId
      in: header
      description: The identifier of a client associated with a "Login with Amazon"
        account.
      required: true
      style: simple
      explode: false
      schema:
        type: string
    contentTypeHeader:
      name: Content-Type
      in: header
      description: The `Content-Type` is application/json.
      required: true
      style: simple
      explode: false
      schema:
        type: string
      example: application/json
